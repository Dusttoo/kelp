{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dusty/kelp/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dusty/kelp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Cookies from'js-cookie';export function csrfFetch(_x){return _csrfFetch.apply(this,arguments);}function _csrfFetch(){_csrfFetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var options,res,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>1&&_args[1]!==undefined?_args[1]:{};options.method=options.method||'GET';options.headers=options.headers||{};if(options.method.toUpperCase()!=='GET'){options.headers['Content-Type']=options.headers['Content-Type']||'application/json';options.headers['XSRF-Token']=Cookies.get('XSRF-TOKEN');}_context.next=6;return window.fetch(url,options);case 6:res=_context.sent;if(!(res.status>=400)){_context.next=9;break;}throw res;case 9:return _context.abrupt(\"return\",res);case 10:case\"end\":return _context.stop();}}},_callee);}));return _csrfFetch.apply(this,arguments);}export function restoreCSRF(){return csrfFetch('/api/csrf/restore');}","map":{"version":3,"sources":["/Users/dusty/kelp/frontend/src/store/csrf.js"],"names":["Cookies","csrfFetch","url","options","method","headers","toUpperCase","get","window","fetch","res","status","restoreCSRF"],"mappings":"uNAAA,MAAOA,CAAAA,OAAP,KAAoB,WAApB,CAEA,eAAsBC,CAAAA,SAAtB,8C,yFAAO,iBAAyBC,GAAzB,kJAA8BC,OAA9B,+CAAwC,EAAxC,CACLA,OAAO,CAACC,MAAR,CAAiBD,OAAO,CAACC,MAAR,EAAkB,KAAnC,CACAD,OAAO,CAACE,OAAR,CAAkBF,OAAO,CAACE,OAAR,EAAmB,EAArC,CAEA,GAAIF,OAAO,CAACC,MAAR,CAAeE,WAAf,KAAiC,KAArC,CAA4C,CAC1CH,OAAO,CAACE,OAAR,CAAgB,cAAhB,EACEF,OAAO,CAACE,OAAR,CAAgB,cAAhB,GAAmC,kBADrC,CAEAF,OAAO,CAACE,OAAR,CAAgB,YAAhB,EAAgCL,OAAO,CAACO,GAAR,CAAY,YAAZ,CAAhC,CACD,CARI,sBASaC,CAAAA,MAAM,CAACC,KAAP,CAAaP,GAAb,CAAkBC,OAAlB,CATb,QASCO,GATD,oBAYDA,GAAG,CAACC,MAAJ,EAAc,GAZb,+BAYwBD,CAAAA,GAZxB,wCAeEA,GAfF,yD,4CAkBP,MAAO,SAASE,CAAAA,WAAT,EAAuB,CAC5B,MAAOX,CAAAA,SAAS,CAAC,mBAAD,CAAhB,CACD","sourcesContent":["import Cookies from 'js-cookie';\n\nexport async function csrfFetch(url, options = {}) {\n  options.method = options.method || 'GET';\n  options.headers = options.headers || {};\n\n  if (options.method.toUpperCase() !== 'GET') {\n    options.headers['Content-Type'] =\n      options.headers['Content-Type'] || 'application/json';\n    options.headers['XSRF-Token'] = Cookies.get('XSRF-TOKEN');\n  }\n  const res = await window.fetch(url, options);\n\n\n  if (res.status >= 400) throw res;\n\n\n  return res;\n}\n\nexport function restoreCSRF() {\n  return csrfFetch('/api/csrf/restore');\n}"]},"metadata":{},"sourceType":"module"}