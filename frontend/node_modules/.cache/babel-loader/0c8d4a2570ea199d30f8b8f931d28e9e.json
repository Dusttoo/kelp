{"ast":null,"code":"const LOAD_BUSINESSES = 'businesses/loadBusiness';\nconst LOAD_PHOTOS = 'photos/loadPhotos';\n\nconst loadBusiness = businesses => ({\n  type: LOAD_BUSINESSES,\n  businesses\n});\n\nconst loadPhotos = photos => ({\n  type: LOAD_PHOTOS,\n  photos\n});\n\nconst loadOneBusiness = (business, photo) => ({\n  type: LOAD_ONE_BIZ,\n  business,\n  photo\n});\n\nexport const getBusinesses = () => async dispatch => {\n  const response = await fetch('/api/businesses');\n  const businesses = await response.json();\n  dispatch(loadBusiness(businesses));\n  return response;\n};\nexport const getPhotos = () => async dispatch => {\n  const response = await fetch('/api/businesses/photos');\n  const photos = await response.json();\n  dispatch(loadPhotos(photos));\n  return response;\n};\nexport const getOneBusiness = id => async dispatch => {\n  const response = await fetch(`/api/businesses/${id}`);\n  const {\n    business,\n    photos\n  } = await response.json();\n  dispatch(loadOneBusiness(business, photos));\n  return response, business, photos;\n};\nconst initialState = {};\n\nconst businessReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_BUSINESSES:\n      const newState = { ...state\n      };\n      action.businesses.forEach(business => {\n        newState[business.id] = business;\n      });\n      return newState;\n\n    case LOAD_PHOTOS:\n      const photoState = { ...state\n      };\n      action.photos.forEach(photo => {\n        photoState[photo.id] = photo;\n      });\n      return photoState;\n\n    case LOAD_ONE_BIZ:\n      const oneBizState = { ...state\n      };\n      oneBizState[action.business.id] = action.business;\n      return oneBizState;\n\n    default:\n      return state;\n  }\n};\n\nexport default businessReducer;","map":{"version":3,"sources":["/Users/dusty/kelp/frontend/src/store/businesses.js"],"names":["LOAD_BUSINESSES","LOAD_PHOTOS","loadBusiness","businesses","type","loadPhotos","photos","loadOneBusiness","business","photo","LOAD_ONE_BIZ","getBusinesses","dispatch","response","fetch","json","getPhotos","getOneBusiness","id","initialState","businessReducer","state","action","newState","forEach","photoState","oneBizState"],"mappings":"AAAA,MAAMA,eAAe,GAAG,yBAAxB;AACA,MAAMC,WAAW,GAAG,mBAApB;;AAGA,MAAMC,YAAY,GAAIC,UAAD,KAAiB;AACpCC,EAAAA,IAAI,EAAEJ,eAD8B;AAEpCG,EAAAA;AAFoC,CAAjB,CAArB;;AAKA,MAAME,UAAU,GAAIC,MAAD,KAAa;AAC9BF,EAAAA,IAAI,EAAEH,WADwB;AAE9BK,EAAAA;AAF8B,CAAb,CAAnB;;AAKA,MAAMC,eAAe,GAAG,CAACC,QAAD,EAAWC,KAAX,MAAsB;AAC5CL,EAAAA,IAAI,EAAEM,YADsC;AAE5CF,EAAAA,QAF4C;AAG5CC,EAAAA;AAH4C,CAAtB,CAAxB;;AAMA,OAAO,MAAME,aAAa,GAAG,MAAM,MAAOC,QAAP,IAAoB;AACrD,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,iBAAD,CAA5B;AACA,QAAMX,UAAU,GAAG,MAAMU,QAAQ,CAACE,IAAT,EAAzB;AACAH,EAAAA,QAAQ,CAACV,YAAY,CAACC,UAAD,CAAb,CAAR;AACA,SAAOU,QAAP;AACD,CALM;AAOP,OAAO,MAAMG,SAAS,GAAG,MAAM,MAAOJ,QAAP,IAAoB;AACjD,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,wBAAD,CAA5B;AACA,QAAMR,MAAM,GAAG,MAAMO,QAAQ,CAACE,IAAT,EAArB;AACAH,EAAAA,QAAQ,CAACP,UAAU,CAACC,MAAD,CAAX,CAAR;AACA,SAAOO,QAAP;AACD,CALM;AAOP,OAAO,MAAMI,cAAc,GAAIC,EAAD,IAAQ,MAAON,QAAP,IAAoB;AACxD,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,mBAAkBI,EAAG,EAAvB,CAA5B;AACA,QAAM;AAACV,IAAAA,QAAD;AAAWF,IAAAA;AAAX,MAAqB,MAAMO,QAAQ,CAACE,IAAT,EAAjC;AAIAH,EAAAA,QAAQ,CAACL,eAAe,CAACC,QAAD,EAAWF,MAAX,CAAhB,CAAR;AACA,SAAQO,QAAQ,EAAEL,QAAF,EAAYF,MAA5B;AAED,CATM;AAYP,MAAMa,YAAY,GAAG,EAArB;;AAEA,MAAMC,eAAe,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkC;AACxD,UAAQA,MAAM,CAAClB,IAAf;AACE,SAAKJ,eAAL;AACE,YAAMuB,QAAQ,GAAG,EAAE,GAAGF;AAAL,OAAjB;AACAC,MAAAA,MAAM,CAACnB,UAAP,CAAkBqB,OAAlB,CAA0BhB,QAAQ,IAAI;AACpCe,QAAAA,QAAQ,CAACf,QAAQ,CAACU,EAAV,CAAR,GAAwBV,QAAxB;AACD,OAFD;AAGA,aAAOe,QAAP;;AACF,SAAKtB,WAAL;AACE,YAAMwB,UAAU,GAAG,EAAE,GAAGJ;AAAL,OAAnB;AACAC,MAAAA,MAAM,CAAChB,MAAP,CAAckB,OAAd,CAAsBf,KAAK,IAAI;AAC7BgB,QAAAA,UAAU,CAAChB,KAAK,CAACS,EAAP,CAAV,GAAuBT,KAAvB;AACD,OAFD;AAGA,aAAOgB,UAAP;;AACF,SAAKf,YAAL;AACE,YAAMgB,WAAW,GAAG,EAAE,GAAGL;AAAL,OAApB;AACEK,MAAAA,WAAW,CAACJ,MAAM,CAACd,QAAP,CAAgBU,EAAjB,CAAX,GAAkCI,MAAM,CAACd,QAAzC;AACF,aAAOkB,WAAP;;AACF;AACE,aAAOL,KAAP;AAlBJ;AAoBD,CArBD;;AAuBA,eAAeD,eAAf","sourcesContent":["const LOAD_BUSINESSES = 'businesses/loadBusiness';\nconst LOAD_PHOTOS = 'photos/loadPhotos';\n\n\nconst loadBusiness = (businesses) => ({\n  type: LOAD_BUSINESSES,\n  businesses,\n});\n\nconst loadPhotos = (photos) => ({\n  type: LOAD_PHOTOS,\n  photos,\n})\n\nconst loadOneBusiness = (business, photo) => ({\n  type: LOAD_ONE_BIZ,\n  business,\n  photo,\n})\n\nexport const getBusinesses = () => async (dispatch) => {\n  const response = await fetch('/api/businesses');\n  const businesses = await response.json();\n  dispatch(loadBusiness(businesses));\n  return response\n};\n\nexport const getPhotos = () => async (dispatch) => {\n  const response = await fetch('/api/businesses/photos');\n  const photos = await response.json();\n  dispatch(loadPhotos(photos));\n  return response\n}\n\nexport const getOneBusiness = (id) => async (dispatch) => {\n  const response = await fetch(`/api/businesses/${id}`)\n  const {business, photos} = await response.json();\n\n\n\n  dispatch(loadOneBusiness(business, photos));\n  return (response, business, photos)\n\n}\n\n\nconst initialState = {};\n\nconst businessReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_BUSINESSES:\n      const newState = { ...state };\n      action.businesses.forEach(business => {\n        newState[business.id] = business;\n      });\n      return newState;\n    case LOAD_PHOTOS:\n      const photoState = { ...state };\n      action.photos.forEach(photo => {\n        photoState[photo.id] = photo;\n      });\n      return photoState;\n    case LOAD_ONE_BIZ:\n      const oneBizState = { ...state };\n        oneBizState[action.business.id] = action.business;\n      return oneBizState;\n    default:\n      return state;\n  }\n};\n\nexport default businessReducer;"]},"metadata":{},"sourceType":"module"}