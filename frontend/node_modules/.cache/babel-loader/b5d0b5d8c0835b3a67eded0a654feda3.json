{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst SET_USER = 'session/setUser';\nconst REMOVE_USER = 'session/removeUser';\n\nconst setUser = user => {\n  return {\n    type: SET_USER,\n    payload: user\n  };\n};\n\nconst removeUser = () => {\n  return {\n    type: REMOVE_USER\n  };\n};\n\nexport const login = user => async dispatch => {\n  const {\n    email,\n    password\n  } = user;\n  console.log(email, '   ', password);\n  const response = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\nexport const signup = user => async dispatch => {\n  const {\n    email,\n    firstName,\n    lastName,\n    profileImg,\n    password\n  } = user;\n  const response = await csrfFetch(\"/api/users\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      firstName,\n      email,\n      password,\n      lastName,\n      profileImg\n    })\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n}; // window.store.dispatch(window.sessionActions.signup({\n//   firstName: 'NewUser',\n//   lastName: 'New',\n//   email: 'new@user.io',\n//   password: 'password'\n// }));\n\nconst initialState = {\n  user: null\n};\n\nconst sessionReducer = (state = initialState, action) => {\n  let newState;\n\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state);\n      newState.user = action.payload;\n      return newState;\n\n    case REMOVE_USER:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport default sessionReducer;","map":{"version":3,"sources":["/Users/dusty/kelp/authenticate-me/frontend/src/store/session.js"],"names":["csrfFetch","SET_USER","REMOVE_USER","setUser","user","type","payload","removeUser","login","dispatch","email","password","console","log","response","method","body","JSON","stringify","data","json","restoreUser","signup","firstName","lastName","profileImg","initialState","sessionReducer","state","action","newState","Object","assign"],"mappings":"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","sourcesContent":["import { csrfFetch } from './csrf';\n\nconst SET_USER = 'session/setUser';\nconst REMOVE_USER = 'session/removeUser';\n\nconst setUser = (user) => {\n  return {\n    type: SET_USER,\n    payload: user,\n  };\n};\n\nconst removeUser = () => {\n  return {\n    type: REMOVE_USER,\n  };\n};\n\nexport const login = (user) => async (dispatch) => {\n  const { email, password } = user;\n  console.log(email, '   ', password)\n  const response = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\n\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\n\nexport const signup = (user) => async (dispatch) => {\n  const { email, firstName, lastName, profileImg, password } = user;\n  const response = await csrfFetch(\"/api/users\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      firstName,\n      email,\n      password,\n      lastName,\n      profileImg,\n    }),\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\n\n\n// window.store.dispatch(window.sessionActions.signup({\n//   firstName: 'NewUser',\n//   lastName: 'New',\n\n//   email: 'new@user.io',\n//   password: 'password'\n// }));\n\nconst initialState = { user: null };\n\nconst sessionReducer = (state = initialState, action) => {\n  let newState;\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state);\n      newState.user = action.payload;\n      return newState;\n    case REMOVE_USER:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n    default:\n      return state;\n  }\n};\n\nexport default sessionReducer;"]},"metadata":{},"sourceType":"module"}