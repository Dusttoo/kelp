{"ast":null,"code":"const LOAD_BUSINESSES = 'businesses/loadBusiness';\nconst LOAD_PHOTOS = 'photos/loadPhotos';\nconst ADD_ONE = 'businesses/addOne';\n\nconst loadBusiness = businesses => ({\n  type: LOAD_BUSINESSES,\n  businesses\n});\n\nconst loadPhotos = photos => ({\n  type: LOAD_PHOTOS,\n  photos\n});\n\nconst addOneBusiness = business => ({\n  type: ADD_ONE,\n  business\n});\n\nexport const getBusinesses = () => async dispatch => {\n  const response = await fetch('/api/businesses');\n  const businesses = await response.json();\n  dispatch(loadBusiness(businesses));\n  return response;\n};\nexport const getPhotos = () => async dispatch => {\n  const response = await fetch('/api/businesses/photos');\n  const photos = await response.json();\n  dispatch(loadPhotos(photos));\n  return response;\n};\nexport const addBusiness = payload => async dispatch => {\n  const response = await fetch('/api/businesses/add', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  });\n  console.log(\"POST RESPONSE:\", response);\n  const business = await response.json();\n  console.log(business);\n  dispatch(addOneBusiness(business));\n  return business;\n};\nconst initialState = {};\n\nconst businessReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_BUSINESSES:\n      const newState = { ...state\n      };\n      action.businesses.forEach(business => {\n        newState[business.id] = business;\n      });\n      return newState;\n\n    case LOAD_PHOTOS:\n      const photoState = { ...state\n      };\n      action.photos.forEach(photo => {\n        photoState[photo.id] = photo;\n      });\n      return photoState;\n\n    case ADD_ONE:\n      {\n        if (!state[action.business.id]) {\n          const newState = { ...state,\n            [action.business.id]: action.business\n          };\n          const businessList = newState.list.map(id => newState[id]);\n          businessList.push(action.business);\n          newState.list = sortList(businessList);\n          return newState;\n        }\n\n        return { ...state,\n          [action.pokemon.id]: { ...state[action.pokemon.id],\n            ...action.pokemon\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default businessReducer;","map":{"version":3,"sources":["/Users/dusty/kelp/frontend/src/store/businesses.js"],"names":["LOAD_BUSINESSES","LOAD_PHOTOS","ADD_ONE","loadBusiness","businesses","type","loadPhotos","photos","addOneBusiness","business","getBusinesses","dispatch","response","fetch","json","getPhotos","addBusiness","payload","method","headers","body","JSON","stringify","console","log","initialState","businessReducer","state","action","newState","forEach","id","photoState","photo","businessList","list","map","push","sortList","pokemon"],"mappings":"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","sourcesContent":["const LOAD_BUSINESSES = 'businesses/loadBusiness';\nconst LOAD_PHOTOS = 'photos/loadPhotos';\nconst ADD_ONE = 'businesses/addOne';\n\n\n\nconst loadBusiness = (businesses) => ({\n  type: LOAD_BUSINESSES,\n  businesses,\n});\n\nconst loadPhotos = (photos) => ({\n  type: LOAD_PHOTOS,\n  photos,\n})\n\nconst addOneBusiness = (business) => ({\n  type: ADD_ONE,\n  business,\n});\n\n\nexport const getBusinesses = () => async (dispatch) => {\n  const response = await fetch('/api/businesses');\n  const businesses = await response.json();\n  dispatch(loadBusiness(businesses));\n  return response\n};\n\nexport const getPhotos = () => async (dispatch) => {\n  const response = await fetch('/api/businesses/photos');\n  const photos = await response.json();\n  dispatch(loadPhotos(photos));\n  return response\n}\n\nexport const addBusiness = (payload) => async (dispatch) => {\n  const response = await fetch('/api/businesses/add', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload),\n  });\n\n  console.log(\"POST RESPONSE:\",response)\n\n  const business = await response.json();\n  console.log(business)\n  dispatch(addOneBusiness(business));\n  return business\n};\n\n\n\n\nconst initialState = {};\n\nconst businessReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_BUSINESSES:\n      const newState = { ...state };\n      action.businesses.forEach(business => {\n        newState[business.id] = business;\n      });\n      return newState;\n    case LOAD_PHOTOS:\n      const photoState = { ...state };\n      action.photos.forEach(photo => {\n        photoState[photo.id] = photo;\n      });\n      return photoState;\n    case ADD_ONE: {\n      if (!state[action.business.id]) {\n        const newState = {\n          ...state,\n          [action.business.id]: action.business\n        };\n        const businessList = newState.list.map(id => newState[id]);\n        businessList.push(action.business);\n        newState.list = sortList(businessList);\n        return newState;\n      }\n      return {\n        ...state,\n        [action.pokemon.id]: {\n          ...state[action.pokemon.id],\n          ...action.pokemon,\n        }\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport default businessReducer;"]},"metadata":{},"sourceType":"module"}