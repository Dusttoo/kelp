(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(11),c=n.n(a),i=(n(28),n(7)),u=n(10),l=n(3),o=n(2),j=n(4),b=n.n(j),d=n(9),p=n(21),O=n.n(p);function m(e){return h.apply(this,arguments)}function h(){return h=Object(d.a)(b.a.mark((function e(t){var n,s,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=r.length>1&&void 0!==r[1]?r[1]:{}).method=n.method||"GET",n.headers=n.headers||{},"GET"!==n.method.toUpperCase()&&(n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.headers["XSRF-Token"]=O.a.get("XSRF-TOKEN")),e.next=6,window.fetch(t,n);case 6:if(!((s=e.sent).status>=400)){e.next=9;break}throw s;case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var f="session/setUser",x="session/removeUser",g=function(e){return{type:f,payload:e}},v={user:null},N=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f:return(e=Object.assign({},t)).user=n.payload,e;case x:return(e=Object.assign({},t)).user=null,e;default:return t}},w=(n(35),n(1));var y=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.session.user})),n=Object(s.useState)(""),r=Object(l.a)(n,2),a=r[0],c=r[1],j=Object(s.useState)(""),p=Object(l.a)(j,2),O=p[0],h=p[1],f=Object(s.useState)(""),x=Object(l.a)(f,2),v=x[0],N=x[1],y=Object(s.useState)(""),S=Object(l.a)(y,2),C=S[0],k=S[1],E=Object(s.useState)(""),F=Object(l.a)(E,2),I=F[0],q=F[1],L=Object(s.useState)(""),P=Object(l.a)(L,2),T=P[0],D=P[1],R=Object(s.useState)([]),U=Object(l.a)(R,2),J=U[0],K=U[1];return t?Object(w.jsx)(o.a,{to:"/"}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"form-container",children:[Object(w.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),I===T?(K([]),e((n={email:a,firstName:O,lastName:v,profileImg:C,password:I},function(){var e=Object(d.a)(b.a.mark((function e(t){var s,r,a,c,i,u,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.email,r=n.firstName,a=n.lastName,c=n.profileImg,i=n.password,e.next=3,m("/api/users",{method:"POST",body:JSON.stringify({firstName:r,email:s,password:i,lastName:a,profileImg:c})});case 3:return u=e.sent,e.next=6,u.json();case 6:return l=e.sent,t(g(l.user)),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch(function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(n=e.sent)&&n.errors&&K(n.errors);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):K(["Confirm Password field must be the same as the Password field"]);var n},className:"signupForm",children:[Object(w.jsx)("ul",{children:J.map((function(e,t){return Object(w.jsx)("li",{children:e},t)}))}),Object(w.jsx)("h1",{className:"login-header",children:"Sign up for Kelp"}),Object(w.jsxs)("div",{className:"signupContainer",children:[Object(w.jsx)("h3",{className:"signup-header",children:"Already a user?"}),Object(w.jsx)(u.b,{to:"/login",className:"signup-link",children:"log in"})]}),Object(w.jsxs)("div",{className:"name-fields",children:[Object(w.jsxs)("label",{className:"signup-label firstName",children:["First Name",Object(w.jsx)("input",{className:"signup-input",type:"text",value:O,onChange:function(e){return h(e.target.value)},required:!0})]}),Object(w.jsxs)("label",{className:"signup-label lastName",children:["Last Name",Object(w.jsx)("input",{className:"signup-input",type:"text",value:v,onChange:function(e){return N(e.target.value)},required:!0})]})]}),Object(w.jsxs)("label",{className:"signup-label",children:["Email",Object(w.jsx)("input",{className:"signup-input",type:"text",value:a,onChange:function(e){return c(e.target.value)},required:!0})]}),Object(w.jsxs)("label",{className:"signup-label",children:["Profile Image",Object(w.jsx)("input",{className:"signup-input",type:"text",value:C,onChange:function(e){return k(e.target.value)},required:!0})]}),Object(w.jsxs)("label",{className:"signup-label",children:["Password",Object(w.jsx)("input",{className:"signup-input",type:"password",value:I,onChange:function(e){return q(e.target.value)},required:!0})]}),Object(w.jsxs)("label",{className:"signup-label",children:["Confirm Password",Object(w.jsx)("input",{className:"signup-input",type:"password",value:T,onChange:function(e){return D(e.target.value)},required:!0})]}),Object(w.jsxs)("div",{className:"buttons",children:[Object(w.jsx)("button",{className:"signup-button",type:"submit",children:"Sign Up"}),Object(w.jsx)("button",{className:"demo-button",type:"submit",children:"Demo"})]})]}),Object(w.jsx)("img",{className:"signupImage",src:"https://i.imgur.com/qI2NnYR.png",alt:"placeholder"})]})})};n(19);var S=function(e){var t=e.user,n=Object(i.b)(),r=Object(s.useState)(!1),a=Object(l.a)(r,2),c=a[0],u=a[1];return Object(s.useEffect)((function(){if(c){var e=function(){u(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[c]),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"account-menu",children:[Object(w.jsx)("button",{onClick:function(){c||u(!0)},children:Object(w.jsx)("i",{className:"fas fa-solid fa-user account-icon"})}),c&&Object(w.jsxs)("ul",{className:"profile-dropdown",children:[Object(w.jsx)("li",{children:"Hello, ".concat(t.firstName," ").concat(t.lastName)}),Object(w.jsx)("li",{children:t.email}),Object(w.jsx)("button",{onClick:function(e){e.preventDefault(),n(function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/api/session",{method:"DELETE"});case 2:return n=e.sent,t({type:x}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"logOut",children:"Log Out"})]})]})})},C=(n(41),r.a.createContext());function k(e){var t=e.children,n=Object(s.useRef)(),r=Object(s.useState)(),a=Object(l.a)(r,2),c=a[0],i=a[1];return Object(s.useEffect)((function(){i(n.current)}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(C.Provider,{value:c,children:t}),Object(w.jsx)("div",{ref:n})]})}function E(e){var t=e.onClose,n=e.children,r=Object(s.useContext)(C);return r?c.a.createPortal(Object(w.jsxs)("div",{id:"modal",children:[Object(w.jsx)("div",{id:"modal-background",onClick:t}),Object(w.jsx)("div",{id:"modal-content",children:n})]}),r):null}n(42);var F=function(){var e=Object(i.b)(),t=Object(s.useState)(""),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(s.useState)(""),o=Object(l.a)(c,2),j=o[0],p=o[1],O=Object(s.useState)([]),h=Object(l.a)(O,2),f=h[0],x=h[1];return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"form-container",children:[Object(w.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),x([]),e((n={email:r,password:j},function(){var e=Object(d.a)(b.a.mark((function e(t){var s,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.email,r=n.password,e.next=3,m("/api/session",{method:"POST",body:JSON.stringify({email:s,password:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,t(g(c.user)),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch(function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(n=e.sent)&&n.errors&&x(n.errors);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var n},className:"loginForm",children:[Object(w.jsx)("ul",{children:f.map((function(e,t){return Object(w.jsx)("li",{children:e},t)}))}),Object(w.jsx)("h1",{className:"login-header",children:"Log in to Kelp"}),Object(w.jsxs)("div",{className:"signupContainer",children:[Object(w.jsx)("h3",{className:"signup-header",children:"New to Kelp?"}),Object(w.jsx)(u.b,{to:"/signup",className:"signup-link",children:"sign up"})]}),Object(w.jsxs)("div",{className:"form-items",children:[Object(w.jsxs)("label",{className:"login-label",children:["Email",Object(w.jsx)("input",{className:"login-input",type:"email",value:r,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(w.jsxs)("label",{className:"login-label",children:["Password",Object(w.jsx)("input",{className:"login-input",type:"password",value:j,onChange:function(e){return p(e.target.value)},required:!0})]})]}),Object(w.jsxs)("div",{className:"buttons",children:[Object(w.jsx)("button",{className:"login-button",type:"submit",children:"Log In"}),Object(w.jsx)("button",{className:"demo-button",type:"submit",children:"Demo"})]})]}),Object(w.jsx)("img",{className:"loginImage",src:"https://i.imgur.com/qI2NnYR.png",alt:"placeholder"})]})})};var I=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{onClick:function(){return r(!0)},children:"Log In"}),n&&Object(w.jsx)(E,{onClose:function(){return r(!1)},children:Object(w.jsx)(F,{})})]})};var q=function(e){var t,n=e.isLoaded,s=Object(i.c)((function(e){return e.session.user}));return t=s?Object(w.jsx)(S,{user:s}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"login-buttons",children:[Object(w.jsx)(I,{}),Object(w.jsx)(u.b,{to:"/signup",className:"signup",children:"Sign Up"})]})}),Object(w.jsxs)("div",{className:"navbar",children:[Object(w.jsx)("div",{className:"home",children:Object(w.jsxs)(u.b,{exact:!0,to:"/",children:[" ",Object(w.jsx)("img",{className:"logo",src:"https://i.imgur.com/DbdVpyZ.png",alt:"kelp logo"})]})}),n&&t]})};var L,P=function(){var e=Object(i.b)(),t=Object(s.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1];return Object(s.useEffect)((function(){e(function(){var e=Object(d.a)(b.a.mark((function e(t){var n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/api/session");case 2:return n=e.sent,e.next=5,n.json();case 5:return s=e.sent,t(g(s.user)),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return a(!0)}))}),[e]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(q,{isLoaded:r}),r&&Object(w.jsx)(o.d,{children:Object(w.jsx)(o.b,{path:"/signup",children:Object(w.jsx)(y,{})})})]})},T=n(14),D=n(23),R=Object(T.b)({session:N});L=Object(T.a)(D.a);var U=function(e){return Object(T.c)(R,e,L)}();function J(){return Object(w.jsx)(i.a,{store:U,children:Object(w.jsx)(k,{children:Object(w.jsx)(u.a,{children:Object(w.jsx)(P,{})})})})}c.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(J,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a56d9735.chunk.js.map